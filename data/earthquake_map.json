{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 1000,
  "height": 650,
  "projection": {
      "type":"albersUsa"
  },  
  "params": [
    {
      "name": "Magnitude_Above",
      "value": 2,
      "bind": {
        "input": "range",
        "min": 2,
        "max": 9.2,
        "step": 0.1,
        "name": "Minimum Magnitude: "
      }
    },
    {"name": "Decade",
      "value": null,
      "bind": {
        "name": "Select Decade: ",
        "input": "select",
        "options": [null, 1900, 1910, 1920, 1930, 1940, 1950, 1960, 1970, 1980, 1990, 2000, 2010, 2020],
        "labels": ["Show All", "1900s", "1910s", "1920s", "1930s", "1940s", "1950s", "1960s", "1970s", "1980s", "1990s", "2000s", "2010s", "2020s"]
      }
    }
  ],
  "layer": [
      {
          "data": {
              "url": "data/ne_50m_admin_1_states_provinces_lakes.json",
              "format": {
                  "type": "topojson",
                  "feature": "ne_50m_admin_1_states_provinces_lakes"
              }
              
          },
          "mark": {
              "type": "geoshape",
              "fill": "lightgrey",
              "stroke": "white"
          }
      },
      {
          "data": {
              "url": "data/1900 usa mag.csv"
          },
          "mark": {
              "type": "circle",
              "stroke": "black",
              "strokeWidth": 1,
              "fillOpacity": 1
          },
          "transform": [
            {"filter": "datum.Mag >= Magnitude_Above"},
            {"filter": "Decade == null || (floor(Decade / 10) === floor(datum.Year / 10))"}
          ],
          "encoding": {
              "longitude": {
                  "field": "Longitude",
                  "type": "quantitative"
              },
              "latitude": {
                  "field": "Latitude",
                  "type": "quantitative"
              },
              "color":{
                "value": "steelblue"                
              },
              "size": {
                "field": "Mag",
                "title": "Magnitude",
                "type": "quantitative",
                "scale": {
                  "type": "threshold",
                  "domain": [3, 5, 7, 9],
                  "range": [100, 250, 450, 750,1000]
                }
            },
              "tooltip": [
                {"field": "Location Name", "type": "ordinal", "title": "Location"},
                {"field": "Year", "type": "ordinal", "title": "Year"},
                  {"field": "Mag", "type": "quantitative", "title": "Magnitude"},
                  {"field": "Focal Depth (km)", "type": "quantitative", "title": "Focal Depth (Km)"},
                  {"field": "Damage ($Mil)", "type": "quantitative", "title": "Damage (Millions of $)"}
                ]
          }
      }
  ]
}